<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href = "C:/Users/orian/preonboarding-projects/tabithasworld/tabitha/src/test/java/com/tabitha/resources/webpages/css/home.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crafty+Girls&family=Jost:wght@300&display=swap');
    </style>
</head>
<body onload = "getAndSetUserInfo()">
    <div>
        <!-- base -->
        <img id = "bg" src = "../css/images/bg.PNG" width = "1350" height = "600" style="z-index: auto;">

        <!-- weather -->
        <img id = "weather-example" width = "325" height = "auto" src = "../css/images/weather-bg.PNG">
        <img id = "weather" width = "450" height = "auto" src = "../css/images/weather-base.PNG" onclick = "location.href = 'weather.html'" onmouseover = "this.src = '../css/images/weather-highlight.png'" onmouseleave = "this.src = '../css/images/weather-base.PNG'" style="z-index: auto;">

        <!-- notebook -->
        <img id = "notebook" width = "185" height = "auto" src = "../css/images/notebook-base.PNG" onclick = "location.href = 'notebook.html'" onmouseover = "this.src = '../css/images/notebook-highlight.png'" onmouseleave = "this.src = '../css/images/notebook-base.PNG'" style="z-index: auto;">

        <!-- to do -->
        <img id = "todo" width = "375" height = "auto" src = "../css/images/todo-base.PNG" onclick = "location.href = 'to-do.html'" onmouseover = "this.src = '../css/images/todo-highlight.png'" onmouseleave = "this.src = '../css/images/todo-base.PNG'" style="z-index: auto;">

        <!-- calendar -->
        <img id = "calendar" width = "350" height = "auto" src = "../css/images/calendar-base.PNG" onclick = "location.href = 'calendar2.html'" onmouseover = "this.src = '../css/images/calendar-highlight.png'" onmouseleave = "this.src = '../css/images/calendar-base.PNG'" style="z-index: auto;">

        <!-- logout -->
        <img id = "logout" width = "150" height = "auto" src = "../css/images/logout-base.PNG" onclick = "location.href = 'login.html'" onmouseover = "this.src = '../css/images/logout-highlight.png'" onmouseleave = "this.src = '../css/images/logout-base.PNG'" style="z-index: auto;">

        <!-- decor -->
        <img id = "cactus" width = "150" height = "auto" src = "../css/images/cactus.PNG" style = "z-index: auto;">

        <!-- logo -->
        <img id = "logo" width = "50" height = "auto" src = "../css/images/logo.PNG" style = "z-index: auto;">

        <div id = "user-info-here" style = "z-index: auto;"></div>

    </div>
</body>
<script>
    const userInfo = document.getElementById("user-info-here");

    async function getAndSetUserInfo(){
        let info = document.createElement("h1");
        info.textContent = `${sessionStorage.getItem("sessionUsername")}`;;
        userInfo.appendChild(info);

        let httpResponse = await fetch(`http://localhost:8080/tabitha/user/username/${sessionStorage.getItem("sessionUsername")}`);
        console.log(httpResponse);
        let responseBody = await httpResponse.json();
        console.log(responseBody);

        if(httpResponse.status === 200){
            for(x of responseBody){
                sessionStorage.setItem("sessionUserId", x.id);
                sessionStorage.setItem("sessionUsername", x.username);
                sessionStorage.setItem("sessionZipCode", x.zip_code);
                console.log(sessionStorage.getItem("sessionUserId"));
                console.log(sessionStorage.getItem("sessionUsername"));
                console.log(sessionStorage.getItem("sessionZipCode"));
            }
        }
    }

</script>
</html>